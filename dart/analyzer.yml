# to include this in various files, we might prepend multiple slashes, see:
# https://gitlab.com/gitlab-org/gitlab/-/issues/28987
include:
  - local: '/dart/common.yml'

dart_analyzer:
  extends: .dart_base
  stage: test
  needs: []
  script:
    - (grep -q -e  '^flutter:$'  pubspec.yaml) && export command=flutter || export command=dart
    - $command format lib/ test/ test_driver/ --set-exit-if-changed
    - $command pub get
    - $command analyze
    - dart pub run import_sorter:main --no-comments --exit-if-changed

